<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Real-Time Forum</title>

    <!-- Fonts inspired by 01talent platform -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800&family=JetBrains+Mono:wght@400;500;600&display=swap" rel="stylesheet">

    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link rel="stylesheet" href="./css/styles.css">
</head>
<body>
    <nav id="main-nav">
        <div class="nav-left">
            <h1>Real-Time Forum</h1>
        </div>
        <div class="nav-center desktop-nav auth-hidden">
            <button id="homeBtn" class="nav-icon-btn" title="Home">
                <i class="fas fa-home"></i>
                <span class="btn-text"></span>
            </button>
            <button id="chatBtn" class="nav-icon-btn" title="Chat">
                <i class="fas fa-comments"></i>
                <span class="btn-text"></span>
            </button>
        </div>
        <div class="nav-right desktop-nav">
            <button id="loginBtn" class="nav-icon-btn auth-visible" title="Login">
                <i class="fas fa-sign-in-alt"></i>
                <span class="btn-text">Login</span>
            </button>
            <button id="registerBtn" class="nav-icon-btn auth-visible" title="Register">
                <i class="fas fa-user-plus"></i>
                <span class="btn-text">Register</span>
            </button>
            <span id="userInfo" class="auth-hidden">
                <button id="profileBtn" class="nav-icon-btn" title="Profile">
                    <i class="fas fa-user"></i>
                    <span class="btn-text"></span>
                </button>
            </span>
        </div>
        <button id="hamburger-menu" class="hamburger-btn">
            <i class="fas fa-bars"></i>
        </button>
        <div id="mobile-menu" class="mobile-menu">
            <div class="mobile-nav auth-hidden">
                <button id="homeBtn-mobile" class="nav-icon-btn" title="Home">
                    <i class="fas fa-home"></i>
                    <span class="btn-text"></span>
                </button>
                <button id="chatBtn-mobile" class="nav-icon-btn" title="Chat">
                    <i class="fas fa-comments"></i>
                    <span class="btn-text"></span>
                </button>
            </div>
            <div class="mobile-nav">
                <button id="loginBtn-mobile" class="nav-icon-btn auth-visible" title="Login">
                    <i class="fas fa-sign-in-alt"></i>
                    <span class="btn-text">Login</span>
                </button>
                <button id="registerBtn-mobile" class="nav-icon-btn auth-visible" title="Register">
                    <i class="fas fa-user-plus"></i>
                    <span class="btn-text">Register</span>
                </button>
                <span id="userInfo-mobile" class="auth-hidden">
                    <button id="profileBtn-mobile" class="nav-icon-btn" title="Profile">
                        <i class="fas fa-user"></i>
                        <span class="btn-text">Profile</span>
                    </button>
                </span>
            </div>
        </div>
    </nav>

    <main id="app">
        <!-- Login Section -->
        <section id="login-section" class="section">
            <h2>Login</h2>
            <form id="login-form">
                <input type="text" name="login" placeholder="Username or Email" required>
                <input type="password" name="password" placeholder="Password" required>
                <button type="submit">Login</button>
            </form>
        </section>

        <!-- Register Section -->
        <section id="register-section" class="section">
            <h2>Register</h2>
            <form id="register-form">
                <input type="text" name="username" placeholder="Username" required>
                <input type="email" name="email" placeholder="Email" required>
                <input type="password" name="password" placeholder="Password" required>
                <input type="text" name="first_name" placeholder="First Name" required>
                <input type="text" name="last_name" placeholder="Last Name" required>
                <input type="number" name="age" placeholder="Age" required>
                <select name="gender" required>
                    <option value="">Select Gender</option>
                    <option value="male">Male</option>
                    <option value="female">Female</option>
                    <option value="other">Other</option>
                </select>
                <button type="submit">Register</button>
            </form>
        </section>

        <!-- Feed Section -->
        <section id="feed-section" class="section">
            <div class="feed-layout">
                <!-- Left Sidebar -->
                <div class="feed-sidebar">
                    <div class="profile-card">
                        <div class="profile-banner"></div>
                        <div class="profile-photo">
                            <div id="profile-image" class="default-avatar">
                                <i class="fas fa-user"></i>
                            </div>
                        </div>
                        <div class="profile-info">
                            <h3 id="profile-name">Loading...</h3>
                            <p id="profile-title" class="text-muted">Forum Member</p>
                        </div>
                        <div class="profile-stats">
                            <div class="stat">
                                <span class="stat-number" id="post-count">0</span>
                                <span class="stat-label">Posts</span>
                            </div>
                        </div>
                        <div class="profile-filters">
                            <button onclick="window.views.loadPosts('', 'my-posts')" class="filter-btn">My Posts</button>
                            <button onclick="window.views.loadPosts('', 'liked-posts')" class="filter-btn">Liked Posts</button>
                            <button onclick="window.views.loadPosts()" class="filter-btn">All Posts</button>
                        </div>

                    </div>
                </div>

                <!-- Main Feed -->
                <div class="feed-main">
                    <div class="create-post-card">
                        <div class="post-form-header">
                            <div class="mini-profile-pic default-avatar">
                                <i class="fas fa-user"></i>
                            </div>
                            <button id="newPostBtn" class="create-post-button">What's on your mind?</button>
                        </div>
                        <form id="quick-post-form" class="quick-post-form hidden">
                            <input type="text" name="title" placeholder="Post title" required class="post-title-input">
                            <textarea name="content" placeholder="What's on your mind?" required></textarea>
                            <div class="quick-post-footer">
                                <select name="category" required>
                                    <option value="">Select Category</option>
                                </select>
                                <button type="submit" class="post-submit-btn">Post</button>
                            </div>
                        </form>
                    </div>
                    <div class="feed-filters">
                        <select id="categoryFilter">
                            <option value="">All Categories</option>
                        </select>
                    </div>
                    <div id="posts-container"></div>
                </div>

                <!-- Right Sidebar -->
                <div class="feed-sidebar">
                    <div class="news-card">
                        <div class="card-header">
                            <h3>Active Categories</h3>
                        </div>
                        <div id="active-categories" class="category-list">
                            <!-- Will be populated by JavaScript -->
                        </div>
                        <div class="card-header mt-4">
                            <h3>Top Contributors</h3>
                        </div>
                        <div id="top-contributors" class="contributors-list">
                            <!-- Will be populated by JavaScript -->
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <!-- Post View Section -->
        <section id="post-section" class="section">
            <div id="post-detail"></div>
        </section>

        <!-- Chat Section -->
        <section id="chat-section" class="section">
            <div class="chat-layout">
                <!-- Connection Status -->
                <div id="connection-status" class="connection-status disconnected">
                    <i class="fas fa-circle"></i>
                    <span>Disconnected</span>
                </div>

                <!-- Chat Container -->
                <div class="chat-container">
                    <!-- Users List -->
                    <div class="chat-sidebar">
                        <div class="chat-header">
                            <h3>Messages</h3>
                            <button id="new-chat-btn" class="new-chat-btn" title="Start new conversation">
                                <i class="fas fa-plus"></i>
                            </button>
                        </div>
                        <div class="chat-search">
                            <input type="text" id="user-search" placeholder="Search users..." />
                        </div>
                        <div class="conversations-list" id="conversations-list">
                            <!-- Conversations will be populated here -->
                        </div>
                        <div class="online-users-section">
                            <h4>Online Users</h4>
                            <div class="online-users-list" id="online-users-list">
                                <!-- Online users will be populated here -->
                            </div>
                        </div>
                    </div>

                    <!-- Chat Messages Area -->
                    <div class="chat-main">
                        <div class="chat-header" id="chat-header">
                            <button id="back-to-conversations" class="back-btn" style="display: none;">
                                <i class="fas fa-arrow-left"></i>
                            </button>
                            <div class="chat-user-info">
                                <div class="avatar">
                                    <i class="fas fa-user"></i>
                                </div>
                                <div class="user-details">
                                    <span class="username">Select a conversation</span>
                                    <span class="status">Click on a user to start chatting</span>
                                </div>
                            </div>
                        </div>

                        <div class="messages-container" id="messages-container">
                            <div class="no-conversation">
                                <i class="fas fa-comments"></i>
                                <p>Select a conversation to start messaging</p>
                            </div>
                        </div>

                        <div class="typing-indicator" id="typing-indicator" style="display: none;">
                            <span></span> is typing...
                        </div>

                        <div class="message-input-container">
                            <form id="chat-form" class="message-form">
                                <input type="text"
                                       id="message-input"
                                       name="message"
                                       placeholder="Type a message..."
                                       autocomplete="off"
                                       disabled>
                                <button type="submit" id="send-btn" disabled>
                                    <i class="fas fa-paper-plane"></i>
                                </button>
                            </form>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <!-- New Post Modal -->
        <div id="new-post-modal" class="modal">
            <div class="modal-content">
                <span class="close">&times;</span>
                <h2>Create New Post</h2>
                <form id="new-post-form">
                    <input type="text" name="title" placeholder="Post Title" required>
                    <textarea name="content" placeholder="Post Content" required></textarea>
                    <select name="category" required>
                        <option value="">Select Category</option>
                    </select>
                    <button type="submit">Create Post</button>
                </form>
            </div>
        </div>
    </main>

    <script src="js/api.js"></script>
    <script src="js/websocket.js"></script>
    <script src="js/chat.js"></script>
    <script src="js/views.js"></script>
    <script src="js/router.js"></script>
    <script src="js/app.js"></script>
</body>
</html>