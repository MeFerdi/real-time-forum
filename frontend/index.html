<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Real-Time Forum</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    <link rel="stylesheet" href="css/styles.css">
</head>
<body>
    <nav id="main-nav">
        <div class="nav-left">
            <h1>Real-Time Forum</h1>
        </div>
        <div class="nav-center desktop-nav auth-hidden">
            <button id="homeBtn" class="nav-icon-btn" title="Home">
                <i class="fas fa-home"></i>
                <span class="btn-text"></span>
            </button>
            <button id="chatBtn" class="nav-icon-btn" title="Chat">
                <i class="fas fa-comments"></i>
                <span class="btn-text"></span>
            </button>
        </div>
        <div class="nav-right desktop-nav">
            <button id="loginBtn" class="nav-icon-btn auth-visible" title="Login">
                <i class="fas fa-sign-in-alt"></i>
                <span class="btn-text">Login</span>
            </button>
            <button id="registerBtn" class="nav-icon-btn auth-visible" title="Register">
                <i class="fas fa-user-plus"></i>
                <span class="btn-text">Register</span>
            </button>
            <span id="userInfo" class="auth-hidden">
                <button id="profileBtn" class="nav-icon-btn" title="Profile">
                    <i class="fas fa-user"></i>
                    <span class="btn-text"></span>
                </button>
            </span>
        </div>
        <button id="hamburger-menu" class="hamburger-btn">
            <i class="fas fa-bars"></i>
        </button>
        <div id="mobile-menu" class="mobile-menu">
            <div class="mobile-nav auth-hidden">
                <button id="homeBtn-mobile" class="nav-icon-btn" title="Home">
                    <i class="fas fa-home"></i>
                    <span class="btn-text"></span>
                </button>
                <button id="chatBtn-mobile" class="nav-icon-btn" title="Chat">
                    <i class="fas fa-comments"></i>
                    <span class="btn-text"></span>
                </button>
            </div>
            <div class="mobile-nav">
                <button id="loginBtn-mobile" class="nav-icon-btn auth-visible" title="Login">
                    <i class="fas fa-sign-in-alt"></i>
                    <span class="btn-text">Login</span>
                </button>
                <button id="registerBtn-mobile" class="nav-icon-btn auth-visible" title="Register">
                    <i class="fas fa-user-plus"></i>
                    <span class="btn-text">Register</span>
                </button>
                <span id="userInfo-mobile" class="auth-hidden">
                    <button id="profileBtn-mobile" class="nav-icon-btn" title="Profile">
                        <i class="fas fa-user"></i>
                        <span class="btn-text">Profile</span>
                    </button>
                </span>
            </div>
        </div>
    </nav>

    <main id="app">
        <!-- Login Section -->
        <section id="login-section" class="section">
            <h2>Login</h2>
            <form id="login-form">
                <input type="text" name="login" placeholder="Username or Email" required>
                <input type="password" name="password" placeholder="Password" required>
                <button type="submit">Login</button>
            </form>
        </section>

        <!-- Register Section -->
        <section id="register-section" class="section">
            <h2>Register</h2>
            <form id="register-form">
                <input type="text" name="username" placeholder="Username" required>
                <input type="email" name="email" placeholder="Email" required>
                <input type="password" name="password" placeholder="Password" required>
                <input type="text" name="first_name" placeholder="First Name" required>
                <input type="text" name="last_name" placeholder="Last Name" required>
                <input type="number" name="age" placeholder="Age" required>
                <select name="gender" required>
                    <option value="">Select Gender</option>
                    <option value="male">Male</option>
                    <option value="female">Female</option>
                    <option value="other">Other</option>
                </select>
                <button type="submit">Register</button>
            </form>
        </section>

        <!-- Feed Section -->
        <section id="feed-section" class="section">
            <div class="feed-layout">
                <!-- Left Sidebar -->
                <div class="feed-sidebar">
                    <div class="profile-card">
                        <div class="profile-banner"></div>
                        <div class="profile-photo">
                            <div id="profile-image" class="default-avatar">
                                <i class="fas fa-user"></i>
                            </div>
                        </div>
                        <div class="profile-info">
                            <h3 id="profile-name">Loading...</h3>
                            <p id="profile-title" class="text-muted">Forum Member</p>
                        </div>
                        <div class="profile-stats">
                            <div class="stat">
                                <span class="stat-number" id="post-count">0</span>
                                <span class="stat-label">Posts</span>
                            </div>
                        </div>
                        <div class="profile-filters">
                            <button onclick="views.loadPosts('', 'my-posts')" class="filter-btn">My Posts</button>
                            <button onclick="views.loadPosts('', 'liked-posts')" class="filter-btn">Liked Posts</button>
                            <button onclick="views.loadPosts()" class="filter-btn">All Posts</button>
                        </div>
                        <div class="profile-actions">
                            <button id="logoutBtn" class="logout-btn"></button>
                        </div>
                    </div>
                </div>

                <!-- Main Feed -->
                <div class="feed-main">
                    <div class="create-post-card">
                        <div class="post-form-header">
                            <div class="mini-profile-pic default-avatar">
                                <i class="fas fa-user"></i>
                            </div>
                            <button id="newPostBtn" class="create-post-button">What's on your mind?</button>
                        </div>
                        <form id="quick-post-form" class="quick-post-form hidden">
                            <input type="text" name="title" placeholder="Post title" required class="post-title-input">
                            <textarea name="content" placeholder="What's on your mind?" required></textarea>
                            <div class="quick-post-footer">
                                <select name="category" required>
                                    <option value="">Select Category</option>
                                </select>
                                <button type="submit" class="post-submit-btn">Post</button>
                            </div>
                        </form>
                    </div>
                    <div class="feed-filters">
                        <select id="categoryFilter">
                            <option value="">All Categories</option>
                        </select>
                    </div>
                    <div id="posts-container"></div>
                </div>

                <!-- Right Sidebar -->
                <div class="feed-sidebar">
                    <div class="news-card">
                        <div class="card-header">
                            <h3>Active Categories</h3>
                        </div>
                        <div id="active-categories" class="category-list">
                        </div>
                        <div class="card-header mt-4">
                            <h3>Top Contributors</h3>
                        </div>
                        <div id="top-contributors" class="contributors-list">
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <!-- Post View Section -->
        <section id="post-section" class="section">
            <div id="post-detail"></div>
        </section>

        <!-- Replace existing chat section with: -->
<section id="chat-section" class="section">
    <div class="chat-layout">
        <!-- Users List -->
        <div class="users-sidebar">
            <div class="users-header">
                <h3>Chats</h3>
            </div>
            <div id="users-list" class="users-container">
                <!-- Users will be populated here -->
            </div>
        </div>

        <!-- Chat Area -->
        <div class="chat-main">
            <div id="chat-header" class="chat-header">
                <div class="chat-user-info">
                    <div class="user-avatar">
                        <img id="chat-user-avatar" src="" alt="">
                        <span id="status-indicator"></span>
                    </div>
                    <span id="chat-user-name"></span>
                </div>
            </div>
            
            <div id="chat-messages" class="messages-container">
                <!-- Messages will be populated here -->
            </div>

            <form id="chat-form" class="chat-input-form">
                <div class="input-container">
                    <input type="text" 
                           name="message" 
                           placeholder="Type a message..." 
                           autocomplete="off"
                           required>
                    <button type="submit">
                        <i class="fas fa-paper-plane"></i>
                    </button>
                </div>
            </form>
        </div>
    </div>
</section>

        <!-- New Post Modal -->
        <div id="new-post-modal" class="modal">
            <div class="modal-content">
                <span class="close">&times;</span>
                <h2>Create New Post</h2>
                <form id="new-post-form">
                    <input type="text" name="title" placeholder="Post Title" required>
                    <textarea name="content" placeholder="Post Content" required></textarea>
                    <select name="category" required>
                        <option value="">Select Category</option>
                    </select>
                    <button type="submit">Create Post</button>
                </form>
            </div>
        </div>
    </main>
    <script type="module" src="js/app.js"></script>
</body>
</html>